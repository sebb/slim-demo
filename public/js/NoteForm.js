// Generated by CoffeeScript 1.4.0
(function() {

  this.NoteForm = (function() {

    function NoteForm(selector) {
      this.selector = selector;
      this.form = this.selector + ' form';
    }

    NoteForm.prototype.observe = function() {
      return $(this.form).on('submit', function(event) {
        var _this = this;
        if ($(this).find('input[type=text]').val() === '' || $(this).find('textarea').val() === '') {
          $(this).append("<div class=\"alert alert-error\">Title and message can't be empty.</div>");
          return false;
        }
        $.ajax({
          type: "POST",
          url: $(this).attr('action'),
          data: $(this).serialize(),
          success: function(data, textStatus, jqXHR) {
            _this.reset();
            $(_this).parent().append(data);
            return Holder.run();
          },
          error: function(jqXHR, textStatus, errorThrown) {
            console.log('error_callback', jqXHR, textStatus, errorThrown);
            return $('#flash-messages').append("<div class=\"alert alert-error\">" + errorThrown + "</div>");
          }
        });
        return false;
      });
    };

    return NoteForm;

  })();

}).call(this);
